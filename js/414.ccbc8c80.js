"use strict";(globalThis["webpackChunkiotapp"]=globalThis["webpackChunkiotapp"]||[]).push([[414],{2414:(e,t,a)=>{a.r(t),a.d(t,{default:()=>J});var s=a(1758),r=a(8790);const i={class:"row q-gutter-sm"},l={class:"row q-pa-md items-center justify-center q-mt-sm q-mb-sm"},c={class:"row q-pa-md items-center justify-center q-mt-sm"},d={class:"col items-center text-white textt",style:{"white-space":"nowrap"}},o={class:"q-gutter-md row justify-start"},n={class:"row flex flex-center"},m={class:"text-h6 text-white q-mb-sm"},p={key:0,class:"q-mt-md",style:{height:"200px","max-width":"100%"}},u={key:1,class:"text-white"},g={class:"row q-gutter-sm q-mt-md"},v={class:"q-mb-none text-center"},h={class:"q-mb-none text-center"},b={class:"row q-gutter-sm"},k={class:"row q-pa-md items-center justify-center q-mt-sm q-mb-sm"},F={class:"row q-pa-md items-center justify-center q-mt-sm"},f={class:"col items-center text-white textt",style:{"white-space":"nowrap"}},q={class:"q-gutter-md row justify-start"},w={class:"row flex flex-center"},x={class:"text-h6 text-white q-mb-sm"},y={key:0,class:"q-mt-md",style:{height:"200px","max-width":"100%"}},_={key:1,class:"text-white"},L={class:"row q-gutter-sm q-mt-md"},C={class:"q-mb-none text-center"},T={class:"q-mb-none text-center"};function D(e,t,a,D,z,I){const N=(0,s.g2)("q-icon"),X=(0,s.g2)("q-card"),j=(0,s.g2)("q-space"),S=(0,s.g2)("l-tile-layer"),B=(0,s.g2)("l-marker"),E=(0,s.g2)("l-map"),A=(0,s.g2)("q-page");return e.$q.platform.is.desktop?((0,s.uX)(),(0,s.Wv)(A,{key:0,class:"q-pa-md bg-dark"},{default:(0,s.k6)(()=>[(0,s.Lk)("div",i,[(0,s.bF)(X,{class:"col cardd q-mb-md bg-black"},{default:(0,s.k6)(()=>[(0,s.Lk)("div",l,[(0,s.bF)(N,{class:"col-3",size:"40px",name:"info",color:"white"}),t[0]||(t[0]=(0,s.Lk)("div",{class:"col items-center text-white textt"}," You can see all the devices that registered here without login to an account ",-1))])]),_:1}),(0,s.bF)(X,{class:"col cardd q-mb-md bg-black"},{default:(0,s.k6)(()=>[(0,s.Lk)("div",c,[(0,s.bF)(N,{class:"col-3",size:"40px",name:"timer",color:"white"}),(0,s.bF)(j),(0,s.Lk)("div",d,(0,r.v_)(z.currentDateTime),1)])]),_:1})]),(0,s.Lk)("div",o,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(z.devices,e=>((0,s.uX)(),(0,s.Wv)(X,{key:e.mac_address,class:"col-12 col-sm-7 col-md-3 col-lg-2 cardd bg-black q-pa-md"},{default:(0,s.k6)(()=>[(0,s.Lk)("div",n,[(0,s.Lk)("div",null,[(0,s.Lk)("div",m,(0,r.v_)(e.device_name),1),I.validCoordinates(e)?((0,s.uX)(),(0,s.CE)("div",p,[(0,s.bF)(E,{zoom:13,center:[parseFloat(e.latitude),parseFloat(e.longitude)],style:{height:"200px",width:"100%"}},{default:(0,s.k6)(()=>[(0,s.bF)(S,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,s.bF)(B,{"lat-lng":[parseFloat(e.latitude),parseFloat(e.longitude)]},null,8,["lat-lng"])]),_:2},1032,["center"])])):((0,s.uX)(),(0,s.CE)("div",u,"Invalid Coordinates")),(0,s.Lk)("div",g,[(0,s.bF)(X,{class:(0,r.C4)([I.getTempBadge(e.data),"col q-pa-md cardd column items-center"]),style:{"min-width":"120px"}},{default:(0,s.k6)(()=>[(0,s.bF)(N,{name:"device_thermostat",size:"40px"}),(0,s.Lk)("p",v,(0,r.v_)(I.getTemperature(e.data))+"°C ",1)]),_:2},1032,["class"]),(0,s.bF)(X,{class:(0,r.C4)([I.getFireBadge(e.data),"col q-pa-md cardd column items-center"]),style:{"min-width":"120px"}},{default:(0,s.k6)(()=>[(0,s.bF)(N,{name:"local_fire_department",size:"40px"}),(0,s.Lk)("p",h,(0,r.v_)(I.getFirestate(e.data)),1)]),_:2},1032,["class"])])])])]),_:2},1024))),128))])]),_:1})):((0,s.uX)(),(0,s.Wv)(A,{key:1,class:"q-pa-md bg-dark"},{default:(0,s.k6)(()=>[(0,s.Lk)("div",b,[(0,s.bF)(X,{class:"col-12 cardd q-mb-md bg-black"},{default:(0,s.k6)(()=>[(0,s.Lk)("div",k,[(0,s.bF)(N,{class:"col-3",size:"40px",name:"info",color:"white"}),t[1]||(t[1]=(0,s.Lk)("div",{class:"col items-center text-white textt"}," You can see all the devices that registered here without login to an account ",-1))])]),_:1}),(0,s.bF)(X,{class:"col-12 cardd q-mb-md bg-black"},{default:(0,s.k6)(()=>[(0,s.Lk)("div",F,[(0,s.bF)(N,{class:"col-3",size:"40px",name:"timer",color:"white"}),(0,s.bF)(j),(0,s.Lk)("div",f,(0,r.v_)(z.currentDateTime),1)])]),_:1})]),(0,s.Lk)("div",q,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(z.devices,e=>((0,s.uX)(),(0,s.Wv)(X,{key:e.mac_address,class:"col-12 col-sm-7 col-md-3 col-lg-2 cardd bg-black q-pa-md"},{default:(0,s.k6)(()=>[(0,s.Lk)("div",w,[(0,s.Lk)("div",null,[(0,s.Lk)("div",x,(0,r.v_)(e.device_name),1),I.validCoordinates(e)?((0,s.uX)(),(0,s.CE)("div",y,[(0,s.bF)(E,{zoom:13,center:[parseFloat(e.latitude),parseFloat(e.longitude)],style:{height:"200px",width:"100%"}},{default:(0,s.k6)(()=>[(0,s.bF)(S,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,s.bF)(B,{"lat-lng":[parseFloat(e.latitude),parseFloat(e.longitude)]},null,8,["lat-lng"])]),_:2},1032,["center"])])):((0,s.uX)(),(0,s.CE)("div",_,"Invalid Coordinates")),(0,s.Lk)("div",L,[(0,s.bF)(X,{class:(0,r.C4)([I.getTempBadge(e.data),"col q-pa-md cardd column items-center"]),style:{"min-width":"120px"}},{default:(0,s.k6)(()=>[(0,s.bF)(N,{name:"device_thermostat",size:"40px"}),(0,s.Lk)("p",C,(0,r.v_)(I.getTemperature(e.data))+"°C ",1)]),_:2},1032,["class"]),(0,s.bF)(X,{class:(0,r.C4)([I.getFireBadge(e.data),"col q-pa-md cardd column items-center"]),style:{"min-width":"120px"}},{default:(0,s.k6)(()=>[(0,s.bF)(N,{name:"local_fire_department",size:"40px"}),(0,s.Lk)("p",T,(0,r.v_)(I.getFirestate(e.data)),1)]),_:2},1032,["class"])])])])]),_:2},1024))),128))])]),_:1}))}var z=a(7024);const I={components:{LMap:z.Do,LTileLayer:z.a,LMarker:z.li},data(){return{devices:[],currentDateTime:""}},mounted(){this.fetchDevices(),this.updateDateTime(),this.intervalId=setInterval(this.updateDateTime,1e3),this.intervalId=setInterval(()=>{this.fetchDevices()},2e3)},beforeUnmount(){clearInterval(this.intervalId)},methods:{async fetchDevices(){try{const e=await this.$api.get("/devices/public");this.devices=e.data.data||[]}catch(e){this.$q.notify({type:"negative",message:"Failed to load devices",position:"top"})}},updateDateTime(){const e=new Date,t={weekday:"long",year:"numeric",month:"long",day:"numeric"},a=e.toLocaleDateString(void 0,t),s=e.toLocaleTimeString();this.currentDateTime=`${a}, ${s}`},validCoordinates(e){const t=parseFloat(e.latitude),a=parseFloat(e.longitude);return!isNaN(t)&&!isNaN(a)},getTemperature(e){if(!e||!e.data)return"-";try{const t="string"===typeof e.data?JSON.parse(e.data):e.data;return void 0!==t.temperature?parseFloat(t.temperature).toFixed(2):"-"}catch(e){return console.error("JSON parse error:",e),"-"}},getTempBadge(e){const t=parseFloat(this.getTemperature(e));return isNaN(t)?"bg-grey":t<40?"bg-green":t<60?"bg-orange":"bg-negative"},getFirestate(e){if(!e)return"-";if(e.data){if("string"!==typeof e.data)return"object"===typeof e.data&&null!==e.data&&void 0!==e.data.api?e.data.api:"-";try{const t=JSON.parse(e.data);return void 0!==t.api?t.api:"-"}catch(e){return console.error("JSON parse error:",e),"-"}}else if(void 0!==e.api)return e.api;return"-"},getFireBadge(e){const t=this.getFirestate(e);return"fire detected!"===t?"bg-negative":"no fire"===t?"bg-green":"bg-grey"}}};var N=a(2807),X=a(7716),j=a(3316),S=a(492),B=a(3676),E=a(8582),A=a.n(E);const $=(0,N.A)(I,[["render",D]]),J=$;A()(I,"components",{QPage:X.A,QCard:j.A,QIcon:S.A,QSpace:B.A})}}]);