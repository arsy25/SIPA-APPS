"use strict";(globalThis["webpackChunkiotapp"]=globalThis["webpackChunkiotapp"]||[]).push([[340],{2340:(e,t,a)=>{a.r(t),a.d(t,{default:()=>J});var l=a(1758),o=a(8790),i=a(9104);const s={class:"q-gutter-md"},d={class:""},r={class:"absolute-center bg-transparent text-center"},n={class:"text-weight-bold text-center text q-mt-sm text-white"},u={class:"q-mt-md text-dark text"},c={class:"q-mt-md"};function m(e,t,a,m,b,g){const p=(0,l.g2)("q-space"),k=(0,l.g2)("q-btn"),v=(0,l.g2)("q-toolbar"),h=(0,l.g2)("q-icon"),F=(0,l.g2)("q-item-section"),f=(0,l.g2)("q-item"),_=(0,l.g2)("q-expansion-item"),x=(0,l.g2)("q-list"),q=(0,l.g2)("q-scroll-area"),w=(0,l.g2)("q-avatar"),A=(0,l.g2)("q-img"),y=(0,l.g2)("q-drawer"),L=(0,l.g2)("q-header"),Q=(0,l.g2)("q-tab"),V=(0,l.g2)("q-tabs"),S=(0,l.g2)("q-separator"),I=(0,l.g2)("q-card-section"),U=(0,l.g2)("q-card-actions"),C=(0,l.g2)("q-tab-panel"),D=(0,l.g2)("q-input"),W=(0,l.g2)("q-form"),$=(0,l.g2)("q-tab-panels"),P=(0,l.g2)("q-card"),E=(0,l.g2)("q-dialog"),R=(0,l.g2)("router-view"),T=(0,l.g2)("q-page-container"),X=(0,l.g2)("q-layout"),M=(0,l.gN)("ripple"),N=(0,l.gN)("close-popup");return(0,l.uX)(),(0,l.CE)(l.FK,null,[t[20]||(t[20]=(0,l.Lk)("link",{href:"https://fonts.googleapis.com/css?family=Poppins",rel:"stylesheet"},null,-1)),(0,l.Lk)("div",null,[(0,l.bF)(X,{view:"lHh Lpr lFf"},{default:(0,l.k6)(()=>[(0,l.bF)(L,null,{default:(0,l.k6)(()=>[(0,l.bF)(v,{class:"bg-dark"},{default:(0,l.k6)(()=>[(0,l.bF)(p),(0,l.Lk)("div",s,[(0,l.bF)(k,{flat:"",onClick:t[0]||(t[0]=e=>m.drawer=!m.drawer),round:"",dense:"",icon:"menu",color:"white"})])]),_:1}),(0,l.bF)(y,{modelValue:m.drawer,"onUpdate:modelValue":t[2]||(t[2]=e=>m.drawer=e),"show-if-above":"",width:250,breakpoint:400,class:"bg-dark"},{default:(0,l.k6)(()=>[(0,l.bF)(q,{style:{height:"calc(100% - 150px)","margin-top":"150px"}},{default:(0,l.k6)(()=>[(0,l.bF)(x,{padding:"",class:"q-pa-sm q-gutter-sm text-white text"},{default:(0,l.k6)(()=>[t[15]||(t[15]=(0,l.Lk)("div",{class:"text-uppercase text-caption text-grey-5 q-pl-md q-pt-md q-ma-none"}," Main menu ",-1)),(0,l.bo)(((0,l.uX)(),(0,l.Wv)(f,{to:"/admin-dashboard",exact:"","active-class":" text-white bg-negative"},{default:(0,l.k6)(()=>[(0,l.bF)(F,{avatar:""},{default:(0,l.k6)(()=>[(0,l.bF)(h,{name:"inbox"})]),_:1}),(0,l.bF)(F,null,{default:(0,l.k6)(()=>t[9]||(t[9]=[(0,l.eW)(" Dashboard ",-1)])),_:1,__:[9]})]),_:1})),[[M]]),t[16]||(t[16]=(0,l.Lk)("div",{class:"text-caption text-uppercase text-grey-5 q-pl-md q-pt-md q-ma-none"}," Master data ",-1)),(0,l.bF)(_,{icon:"book",label:"Rabbitmq","active-class":" text-white bg-negative"},{default:(0,l.k6)(()=>[(0,l.bo)(((0,l.uX)(),(0,l.Wv)(f,{to:"/add_topic",exact:"","active-class":" text-white bg-negative"},{default:(0,l.k6)(()=>[(0,l.bF)(F,{avatar:""},{default:(0,l.k6)(()=>[(0,l.bF)(h,{name:"add"})]),_:1}),(0,l.bF)(F,null,{default:(0,l.k6)(()=>t[10]||(t[10]=[(0,l.eW)(" Add topic ",-1)])),_:1,__:[10]})]),_:1})),[[M]]),(0,l.bo)(((0,l.uX)(),(0,l.Wv)(f,{to:"/allUsers",exact:"","active-class":" text-white bg-negative"},{default:(0,l.k6)(()=>[(0,l.bF)(F,{avatar:""},{default:(0,l.k6)(()=>[(0,l.bF)(h,{name:"task"})]),_:1}),(0,l.bF)(F,null,{default:(0,l.k6)(()=>t[11]||(t[11]=[(0,l.eW)(" All topics ",-1)])),_:1,__:[11]})]),_:1})),[[M]])]),_:1}),(0,l.bF)(_,{icon:"devices",label:"Devices","active-class":" text-white bg-negative"},{default:(0,l.k6)(()=>[(0,l.bo)(((0,l.uX)(),(0,l.Wv)(f,{to:"/add_devices",exact:"","active-class":" text-white bg-negative"},{default:(0,l.k6)(()=>[(0,l.bF)(F,{avatar:""},{default:(0,l.k6)(()=>[(0,l.bF)(h,{name:"add"})]),_:1}),(0,l.bF)(F,null,{default:(0,l.k6)(()=>t[12]||(t[12]=[(0,l.eW)(" Add Devices ",-1)])),_:1,__:[12]})]),_:1})),[[M]]),(0,l.bo)(((0,l.uX)(),(0,l.Wv)(f,{to:"/all_devices",exact:"","active-class":" text-white bg-negative"},{default:(0,l.k6)(()=>[(0,l.bF)(F,{avatar:""},{default:(0,l.k6)(()=>[(0,l.bF)(h,{name:"task"})]),_:1}),(0,l.bF)(F,null,{default:(0,l.k6)(()=>t[13]||(t[13]=[(0,l.eW)(" All Devices ",-1)])),_:1,__:[13]})]),_:1})),[[M]])]),_:1}),t[17]||(t[17]=(0,l.Lk)("div",{class:"text-caption text-uppercase text-grey-5 q-pl-md q-pt-md q-ma-none"}," Devices information ",-1)),(0,l.bo)(((0,l.uX)(),(0,l.Wv)(f,{to:"/monitoring",exact:"","active-class":" text-white bg-negative"},{default:(0,l.k6)(()=>[(0,l.bF)(F,{avatar:""},{default:(0,l.k6)(()=>[(0,l.bF)(h,{name:"monitor"})]),_:1}),(0,l.bF)(F,null,{default:(0,l.k6)(()=>t[14]||(t[14]=[(0,l.eW)(" Monitoring ",-1)])),_:1,__:[14]})]),_:1})),[[M]]),(0,l.Lk)("div",d,[(0,l.bF)(k,{flat:"",color:"negative",class:"text-capitalize",icon:"logout",label:"Logout",onClick:g.logout},null,8,["onClick"])])]),_:1,__:[15,16,17]})]),_:1}),(0,l.bF)(A,{class:"absolute-top",src:"https://i.pinimg.com/1200x/0a/a8/bf/0aa8bfa73e2f93d3816b75bbd1b4a95a.jpg",style:{height:"150px"}},{default:(0,l.k6)(()=>[(0,l.Lk)("div",r,[(0,l.bF)(w,{clickable:"",onClick:t[1]||(t[1]=e=>b.isDialogOpen=!0),class:"cursor-pointer"},{default:(0,l.k6)(()=>t[18]||(t[18]=[(0,l.Lk)("img",{src:"https://i.pinimg.com/1200x/0a/03/15/0a0315470f154ecd98298b4ec467373d.jpg"},null,-1)])),_:1,__:[18]}),(0,l.Lk)("div",null,[(0,l.Lk)("div",n,(0,o.v_)(b.user.username),1)])])]),_:1})]),_:1},8,["modelValue"])]),_:1}),(0,l.bF)(E,{modelValue:b.isDialogOpen,"onUpdate:modelValue":t[8]||(t[8]=e=>b.isDialogOpen=e),persistent:""},{default:(0,l.k6)(()=>[(0,l.bF)(P,{class:"bg-dark full-width",style:{"min-width":"400px","max-width":"500px"}},{default:(0,l.k6)(()=>[(0,l.bF)(V,{modelValue:b.tab,"onUpdate:modelValue":t[3]||(t[3]=e=>b.tab=e),class:"text-white",align:"justify","indicator-color":"white","active-color":"white",dense:""},{default:(0,l.k6)(()=>[(0,l.bF)(Q,{name:"logout",label:"Logout"}),(0,l.bF)(Q,{name:"edit",label:"Edit User"})]),_:1},8,["modelValue"]),(0,l.bF)(S,{color:"grey-7"}),(0,l.bF)($,{modelValue:b.tab,"onUpdate:modelValue":t[7]||(t[7]=e=>b.tab=e),animated:""},{default:(0,l.k6)(()=>[(0,l.bF)(C,{name:"logout",class:"text-dark"},{default:(0,l.k6)(()=>[(0,l.bF)(I,{class:"row items-center q-pb-none"},{default:(0,l.k6)(()=>[(0,l.bF)(p),(0,l.bo)((0,l.bF)(k,{icon:"close",color:"red",flat:"",round:"",dense:""},null,512),[[N]])]),_:1}),(0,l.bF)(I,{class:"text-center"},{default:(0,l.k6)(()=>[t[19]||(t[19]=(0,l.Lk)("img",{src:"https://i.pinimg.com/1200x/0a/03/15/0a0315470f154ecd98298b4ec467373d.jpg",alt:"Avatar",style:{width:"80px",height:"80px","border-radius":"50%"}},null,-1)),(0,l.Lk)("div",u,[(0,l.Lk)("p",null,"Hai, "+(0,o.v_)(b.user.name),1)])]),_:1,__:[19]}),(0,l.bF)(U,{align:"center"},{default:(0,l.k6)(()=>[(0,l.bF)(k,{icon:"power_settings_new",label:"Logout",flat:"",class:"text-capitalize",color:"red",onClick:g.logout},null,8,["onClick"])]),_:1})]),_:1}),(0,l.bF)(C,{name:"edit",class:"q-pa-md"},{default:(0,l.k6)(()=>[(0,l.bF)(W,{onSubmit:(0,i.D$)(g.submitEdit,["prevent"]),ref:"editForm"},{default:(0,l.k6)(()=>[(0,l.bF)(D,{filled:"",modelValue:b.editForm.name,"onUpdate:modelValue":t[4]||(t[4]=e=>b.editForm.name=e),label:"Name",outlined:"",color:"white","text-color":"black",rules:[e=>!!e||"Name is required"]},null,8,["modelValue","rules"]),(0,l.bF)(D,{filled:"",modelValue:b.editForm.email,"onUpdate:modelValue":t[5]||(t[5]=e=>b.editForm.email=e),label:"Email",color:"white","text-color":"black",rules:[e=>!!e||"Email is required"]},null,8,["modelValue","rules"]),(0,l.bF)(D,{filled:"",modelValue:b.editForm.phone,"onUpdate:modelValue":t[6]||(t[6]=e=>b.editForm.phone=e),label:"Phone",color:"white","text-color":"black",class:"q-mb-md"},null,8,["modelValue"]),(0,l.Lk)("div",c,[(0,l.bF)(k,{type:"submit",label:"Save",color:"primary",class:"full-width bg-negative"})])]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),(0,l.bF)(T,null,{default:(0,l.k6)(()=>[(0,l.bF)(R)]),_:1})]),_:1})])],64)}var b=a(8734),g=a(411);const p={setup(){const e=(0,b.KR)(g.A.isActive),t=()=>{e.value=!e.value,g.A.set(e.value),localStorage.setItem("darkMode",e.value),e.value?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode")};return(0,l.sV)(()=>{const t=localStorage.getItem("darkMode");null!==t&&(e.value="true"===t,g.A.set(e.value),e.value?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode"))}),{drawer:(0,b.KR)(!1),miniState:(0,b.KR)(!0),isDark:e,toggleDarkMode:t}},data(){return{editForm:{id_user:null,name:"",email:"",phone:"",username:"",role:""},user:{},loading:!1,tab:"logout",isDialogOpen:!1}},methods:{loadUserFromLocalStorage(){try{const e=JSON.parse(localStorage.getItem("user"));e&&(this.user=e,this.editForm.id_user=e.id_user||null,this.editForm.name=e.name||"",this.editForm.email=e.email||"",this.editForm.username=e.username||"",this.editForm.phone=e.phone||"",this.editForm.role=e.role||"")}catch(e){console.warn("Error loading user",e)}},async submitEdit(){const e=this.editForm.id_user;console.log("URL will be called with id:",e);const t=await this.$refs.editForm.validate();if(console.log("API URL:",`/iotapp/users/${this.user.id_user}`),t){this.loading=!0;try{const t=localStorage.getItem("token"),{id_user:a,...l}=this.editForm;await this.$api.put(`/users/${e}`,l,{headers:{Authorization:`Bearer ${t}`}}),this.$q.notify({type:"positive",message:"User updated successfully!"});const o={...l,id_user:a};localStorage.setItem("user",JSON.stringify(o)),this.user={...o},this.tab="logout"}catch(e){this.$q.notify({type:"negative",message:e.response?.data?.message||"Failed to update user."}),console.error("Update user error:",e)}finally{this.loading=!1}}else this.$q.notify({type:"negative",message:"Please fill all required fields"})},logout(){localStorage.removeItem("token"),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("user"),this.$router.push("/"),window.location.reload()}},mounted(){this.loadUserFromLocalStorage()}};var k=a(2807),v=a(2008),h=a(8416),F=a(6914),f=a(3676),_=a(1693),x=a(6056),q=a(8958),w=a(3999),A=a(124),y=a(5173),L=a(492),Q=a(9459),V=a(2665),S=a(3952),I=a(2156),U=a(3316),C=a(2980),D=a(9761),W=a(386),$=a(9041),P=a(1746),E=a(4189),R=a(2669),T=a(9200),X=a(9270),M=a(5205),N=a(7716),O=a(7092),j=a(9626),K=a(8672),z=a(8582),H=a.n(z);const B=(0,k.A)(p,[["render",m]]),J=B;H()(p,"components",{QLayout:v.A,QHeader:h.A,QToolbar:F.A,QSpace:f.A,QBtn:_.A,QDrawer:x.A,QScrollArea:q.A,QList:w.A,QItem:A.A,QItemSection:y.A,QIcon:L.A,QExpansionItem:Q.A,QImg:V.A,QAvatar:S.A,QDialog:I.A,QCard:U.A,QTabs:C.A,QTab:D.A,QSeparator:W.A,QTabPanels:$.A,QTabPanel:P.A,QCardSection:E.A,QCardActions:R.A,QForm:T.A,QInput:X.A,QPageContainer:M.A,QPage:N.A,QFooter:O.A}),H()(p,"directives",{Ripple:j.A,ClosePopup:K.A})}}]);