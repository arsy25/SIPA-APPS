"use strict";(globalThis["webpackChunkiotapp"]=globalThis["webpackChunkiotapp"]||[]).push([[122],{2122:(e,t,s)=>{s.r(t),s.d(t,{default:()=>L});var i=s(1758);function o(e,t,s,o,l,a){const r=(0,i.g2)("LoginForm");return(0,i.uX)(),(0,i.Wv)(r)}var l=s(9104);const a={class:"q-gutter-md"},r={class:"q-gutter-md"};function n(e,t,s,o,n,d){const u=(0,i.g2)("q-input"),c=(0,i.g2)("q-icon"),m=(0,i.g2)("q-btn"),p=(0,i.g2)("q-form"),b=(0,i.g2)("q-card"),f=(0,i.g2)("q-page");return e.$q.platform.is.mobile?((0,i.uX)(),(0,i.Wv)(f,{key:0,class:"q-pa-md flex flex-center bg-dark"},{default:(0,i.k6)(()=>[(0,i.bF)(b,{class:"bg-grey-10 q-pa-md",style:{"max-width":"400px",width:"100%"}},{default:(0,i.k6)(()=>[t[6]||(t[6]=(0,i.Lk)("div",{class:"text-h5 text-white text-bold text-center"},[(0,i.eW)(" Login"),(0,i.Lk)("sup",{class:"text-primary"},"ðŸ”¥")],-1)),t[7]||(t[7]=(0,i.Lk)("div",{class:"text-subtitle2 text-grey-8 text-center",style:{"margin-bottom":"50px"}}," Login to your account to access IoTools ",-1)),(0,i.bF)(p,{onSubmit:(0,l.D$)(d.submitLogin,["prevent"]),ref:"formRef",class:"col"},{default:(0,i.k6)(()=>[(0,i.Lk)("div",a,[(0,i.bF)(u,{outlined:"",dense:"",modelValue:n.form.identifier,"onUpdate:modelValue":t[0]||(t[0]=e=>n.form.identifier=e),label:"Username / Email / Phone","label-color":"white",rules:[e=>!!e||"Username/Email/Phone is required"],class:"white-outline","lazy-rules":"",autocomplete:"username","input-class":"text-white",color:"white"},null,8,["modelValue","rules"]),(0,i.bF)(u,{outlined:"",dense:"",modelValue:n.form.password,"onUpdate:modelValue":t[2]||(t[2]=e=>n.form.password=e),type:n.passwordVisible?"text":"password",label:"Password","label-color":"white",rules:[e=>!!e||"Password is required",e=>e.length>=6||"Password must be at least 6 characters"],"lazy-rules":"",autocomplete:"current-password","input-class":"text-white",class:"white-outline",color:"white"},{append:(0,i.k6)(()=>[(0,i.bF)(c,{name:n.passwordVisible?"visibility_off":"visibility",class:"cursor-pointer",color:"white",onClick:t[1]||(t[1]=e=>n.passwordVisible=!n.passwordVisible)},null,8,["name"])]),_:1},8,["modelValue","type","rules"])]),(0,i.bF)(m,{label:"Login",type:"submit",color:"white",loading:n.loading,unelevated:"",class:"full-width button-cuy text-capitalize q-mt-md text-black q-mb-md"},null,8,["loading"])]),_:1},8,["onSubmit"])]),_:1,__:[6,7]})]),_:1})):((0,i.uX)(),(0,i.Wv)(f,{key:1,class:"q-pa-md flex flex-center bg-dark"},{default:(0,i.k6)(()=>[(0,i.bF)(b,{class:"bg-grey-10 q-pa-md",style:{"max-width":"400px",width:"100%"}},{default:(0,i.k6)(()=>[t[8]||(t[8]=(0,i.Lk)("div",{class:"text-h5 text-white text-bold text-center"},[(0,i.eW)(" Login"),(0,i.Lk)("sup",{class:"text-primary"},"ðŸ”¥")],-1)),t[9]||(t[9]=(0,i.Lk)("div",{class:"text-subtitle2 text-grey-8 text-center",style:{"margin-bottom":"50px"}}," Login to your account to access IoTools ",-1)),(0,i.bF)(p,{onSubmit:(0,l.D$)(d.submitLogin,["prevent"]),ref:"formRef",class:"col"},{default:(0,i.k6)(()=>[(0,i.Lk)("div",r,[(0,i.bF)(u,{outlined:"",dense:"",modelValue:n.form.identifier,"onUpdate:modelValue":t[3]||(t[3]=e=>n.form.identifier=e),label:"Username / Email / Phone","label-color":"white",rules:[e=>!!e||"Username/Email/Phone is required"],class:"white-outline","lazy-rules":"",autocomplete:"username","input-class":"text-white",color:"white"},null,8,["modelValue","rules"]),(0,i.bF)(u,{outlined:"",dense:"",modelValue:n.form.password,"onUpdate:modelValue":t[5]||(t[5]=e=>n.form.password=e),type:n.passwordVisible?"text":"password",label:"Password","label-color":"white",rules:[e=>!!e||"Password is required",e=>e.length>=6||"Password must be at least 6 characters"],"lazy-rules":"",autocomplete:"current-password","input-class":"text-white",class:"white-outline",color:"white"},{append:(0,i.k6)(()=>[(0,i.bF)(c,{name:n.passwordVisible?"visibility_off":"visibility",class:"cursor-pointer",color:"white",onClick:t[4]||(t[4]=e=>n.passwordVisible=!n.passwordVisible)},null,8,["name"])]),_:1},8,["modelValue","type","rules"])]),(0,i.bF)(m,{label:"Login",type:"submit",color:"white",loading:n.loading,unelevated:"",class:"full-width button-cuy text-capitalize q-mt-md text-black q-mb-md"},null,8,["loading"])]),_:1},8,["onSubmit"])]),_:1,__:[8,9]})]),_:1}))}const d={name:"LoginForm",data(){return{form:{identifier:"",password:""},passwordVisible:!1,loading:!1}},methods:{async submitLogin(){if(this.form.identifier&&this.form.password){this.loading=!0;try{const e={identifier:this.form.identifier,password:this.form.password},t=await this.$api.post("users/login",e);if(t.data&&t.data.token){const{token:e,pengguna:s}=t.data;localStorage.setItem("token",e),localStorage.setItem("user",JSON.stringify(s)),this.$q.notify({type:"positive",message:"Login successful! Redirecting...",position:"top"}),this.form.identifier="",this.form.password="",this.$refs.formRef&&this.$refs.formRef.resetValidation(),this.$router.push("/dashboard")}else this.$q.notify({type:"negative",message:t.data.message||"Login failed. Please check your credentials.",position:"top"})}catch(e){this.$q.notify({type:"negative",message:e.response?.data?.message||e.message||"Failed to login.",position:"top"})}finally{this.loading=!1}}else this.$q.notify({type:"negative",message:"Please fill in all required fields.",position:"top"})}}};var u=s(2807),c=s(7716),m=s(3316),p=s(9200),b=s(9270),f=s(492),g=s(1693),h=s(7156),w=s(8582),y=s.n(w);const x=(0,u.A)(d,[["render",n],["__scopeId","data-v-03982891"]]),k=x;y()(d,"components",{QPage:c.A,QCard:m.A,QForm:p.A,QInput:b.A,QIcon:f.A,QBtn:g.A,QField:h.A});const q={components:{LoginForm:k}},v=(0,u.A)(q,[["render",o]]),L=v}}]);